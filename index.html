<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>íˆì¹ ì˜¤ëŠ˜ì˜ í–‰ìš´</title>
  <meta name="theme-color" content="#ff7a18" />
  <style>
    :root{
      --bg:#0b0f14;
      --card:#111826;
      --muted:#9aa4b2;
      --text:#e6edf3;
      --accent:#ff7a18;     /* íˆì¹ ì‹œê·¸ë‹ˆì²˜ ì˜¤ë Œì§€ */
      --line:rgba(255,255,255,.10);
      --shadow: 0 18px 45px rgba(0,0,0,.45);
      --radius:20px;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, "Apple SD Gothic Neo", "Noto Sans KR", Arial, sans-serif;
      background:
        radial-gradient(1100px 650px at 20% -10%, rgba(255,122,24,.18), transparent 55%),
        radial-gradient(900px 600px at 110% 10%, rgba(45,212,191,.10), transparent 50%),
        radial-gradient(900px 700px at 40% 120%, rgba(251,113,133,.08), transparent 55%),
        var(--bg);
      color:var(--text);
      min-height:100vh;
      display:flex;
      align-items:center;
      justify-content:center;
      padding:22px;
    }
    .wrap{
      width:min(560px, 100%);
    }
    .top{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      margin-bottom:14px;
    }
    .brand{
      display:flex;
      align-items:center;
      gap:10px;
    }
    .logo{
      width:42px;height:42px;border-radius:14px;
      background: linear-gradient(135deg, rgba(255,122,24,1), rgba(255,200,140,.9));
      box-shadow: 0 10px 22px rgba(255,122,24,.18);
      display:grid; place-items:center;
      color:#111;
      font-weight:900;
      letter-spacing:.5px;
    }
    .brand h1{
      font-size:16px;
      margin:0;
      letter-spacing:-.2px;
    }
    .brand p{
      margin:2px 0 0;
      font-size:12px;
      color:var(--muted);
    }
    .pill{
      font-size:12px;
      color:rgba(0,0,0,.85);
      background: rgba(255,122,24,1);
      padding:8px 10px;
      border-radius:999px;
      font-weight:800;
      letter-spacing:-.2px;
      box-shadow: 0 10px 25px rgba(255,122,24,.16);
      white-space:nowrap;
    }

    .card{
      background: linear-gradient(180deg, rgba(17,24,38,1), rgba(17,24,38,.86));
      border:1px solid var(--line);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .hero{
      padding:20px 20px 16px;
      border-bottom: 1px solid var(--line);
      display:flex;
      flex-direction:column;
      gap:8px;
    }
    .date{
      font-size:12px;
      color:var(--muted);
    }
    .title{
      font-size:18px;
      font-weight:900;
      margin:0;
      letter-spacing:-.3px;
      line-height:1.25;
    }
    .subtitle{
      margin:0;
      font-size:13px;
      color:rgba(230,237,243,.86);
      line-height:1.5;
    }

    .content{
      padding:18px 20px 20px;
      display:flex;
      flex-direction:column;
      gap:14px;
    }

    .fortuneBox{
      border:1px solid rgba(255,122,24,.25);
      background: rgba(255,122,24,.06);
      border-radius: 18px;
      padding:16px 14px;
    }
    .fortuneType{
      display:inline-flex;
      align-items:center;
      gap:8px;
      font-size:12px;
      font-weight:800;
      color: rgba(255,200,140,1);
      margin-bottom:10px;
      letter-spacing:-.2px;
    }
    .dot{
      width:8px;height:8px;border-radius:999px;
      background: rgba(255,122,24,1);
      box-shadow: 0 0 0 4px rgba(255,122,24,.15);
    }
    .fortuneText{
      font-size:18px;
      font-weight:900;
      letter-spacing:-.35px;
      line-height:1.35;
      margin:0;
      word-break:keep-all;
    }
    .fortuneDesc{
      margin:10px 0 0;
      font-size:13px;
      color: rgba(230,237,243,.86);
      line-height:1.6;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap:10px;
    }
    .mini{
      border:1px solid var(--line);
      border-radius: 16px;
      padding:12px 12px;
      background: rgba(255,255,255,.03);
    }
    .mini .k{
      font-size:12px;
      color: var(--muted);
      margin:0 0 6px;
    }
    .mini .v{
      font-size:14px;
      font-weight:900;
      margin:0;
      letter-spacing:-.25px;
    }

    .actions{
      display:flex;
      gap:10px;
      flex-wrap:wrap;
      margin-top:2px;
    }
    button, a.btn{
      appearance:none;
      border:1px solid var(--line);
      background: rgba(255,255,255,.03);
      color: var(--text);
      padding:12px 12px;
      border-radius: 14px;
      font-weight:900;
      letter-spacing:-.2px;
      cursor:pointer;
      text-decoration:none;
      display:inline-flex;
      align-items:center;
      justify-content:center;
      gap:8px;
      flex:1 1 150px;
      transition: transform .08s ease, border-color .12s ease, background .12s ease;
    }
    button:hover, a.btn:hover{
      transform: translateY(-1px);
      border-color: rgba(255,122,24,.35);
      background: rgba(255,122,24,.06);
    }
    button.primary{
      border-color: rgba(255,122,24,.45);
      background: rgba(255,122,24,.12);
    }
    .footer{
      padding:14px 20px 18px;
      border-top: 1px solid var(--line);
      color: var(--muted);
      font-size:12px;
      line-height:1.55;
    }
    .toast{
      position:fixed;
      left:50%;
      bottom:22px;
      transform: translateX(-50%);
      background: rgba(17,24,38,.95);
      border:1px solid rgba(255,255,255,.14);
      box-shadow: 0 12px 30px rgba(0,0,0,.4);
      border-radius: 999px;
      padding:10px 14px;
      font-size:12px;
      color: var(--text);
      opacity:0;
      pointer-events:none;
      transition: opacity .18s ease, transform .18s ease;
    }
    .toast.on{
      opacity:1;
      transform: translateX(-50%) translateY(-4px);
    }

    @media (max-width:420px){
      .grid{ grid-template-columns:1fr; }
      .fortuneText{ font-size:17px; }
      button, a.btn{ flex:1 1 100%; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="top">
      <div class="brand">
        <div class="logo">H</div>
        <div>
          <h1>íˆì¹ Â· ì˜¤ëŠ˜ì˜ í–‰ìš´</h1>
          <p>QR ì°ê³  í•˜ë£¨ê°€ íŠ¹ë³„í•´ì§€ëŠ” í•œ ë¬¸ì¥</p>
        </div>
      </div>
      <div class="pill" id="todayPill">Today</div>
    </div>

    <div class="card">
      <div class="hero">
        <div class="date" id="dateLine"></div>
        <p class="title">ì˜¤ëŠ˜ ë‹¹ì‹ ì—ê²Œ ë”± ë§ëŠ” í•œ ì¤„ì„ ë½‘ì•„ë“œë¦´ê²Œìš”.</p>
        <p class="subtitle">ê°™ì€ ë‚ ì—ëŠ” ê°™ì€ íœ´ëŒ€í°ì—ì„œ ë¬¸êµ¬ê°€ ìœ ì§€ë¼ìš”. (ìš´ì„¸ ëŠë‚Œ!)</p>
      </div>

      <div class="content">
        <div class="fortuneBox">
          <div class="fortuneType"><span class="dot"></span><span id="fortuneTag">ì˜¤ëŠ˜ì˜ í•œë§ˆë””</span></div>
          <p class="fortuneText" id="fortuneText">ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘â€¦</p>
          <p class="fortuneDesc" id="fortuneDesc"></p>
        </div>

        <div class="grid">
          <div class="mini">
            <p class="k">í–‰ìš´ í‚¤ì›Œë“œ</p>
            <p class="v" id="luckyKeyword">â€”</p>
          </div>
          <div class="mini">
            <p class="k">ëŸ­í‚¤ ì»¬ëŸ¬</p>
            <p class="v" id="luckyColor">â€”</p>
          </div>
          <div class="mini">
            <p class="k">ì˜¤ëŠ˜ì˜ ì¶”ì²œ</p>
            <p class="v" id="todayTip">â€”</p>
          </div>
          <div class="mini">
            <p class="k">í•œ ê°€ì§€ ì•½ì†</p>
            <p class="v" id="onePromise">â€”</p>
          </div>
        </div>

<div class="actions">
  <button class="primary" id="newBtn" type="button">ğŸ”„ ìƒˆ ìš´ì„¸ ë½‘ê¸°</button>
  <button id="copyBtn" type="button">ğŸ“‹ ë¬¸êµ¬ ë³µì‚¬</button>
  <button id="shareBtn" type="button">ğŸ“² ê³µìœ </button>

  <!-- ì˜ˆì•½í•˜ê¸° ë²„íŠ¼ -->
  <a class="btn"
     href="https://www.instagram.com/h_ssup_/"
     target="_blank"
     rel="noopener noreferrer">
     ğŸ“… ì˜ˆì•½í•˜ê¸° (Instagram)
  </a>
</div>

      </div>

      <div class="footer">
        ğŸ’¡ íŒ: í‚¤ë§ QRì€ <b>í•­ìƒ ê°™ì€ ë§í¬</b>ë¡œ ì°ì–´ë‘ë©´ ê´€ë¦¬ê°€ ì œì¼ í¸í•´ìš”.<br/>
        Â© HSSUP â€” ì˜¤ëŠ˜ë„ ì˜ˆë»ì§ˆ í–‰ìš´ì´ ìŸì•„ì§€ëŠ” ë‚  âœ¨
      </div>
    </div>
  </div>

  <div class="toast" id="toast">ì™„ë£Œ!</div>

  <script>
    // ------------------ ë°ì´í„°(ë¬¸êµ¬/í‚¤ì›Œë“œ/íŒ) ------------------
    // ì›í•˜ë©´ ì´ ë¦¬ìŠ¤íŠ¸ë§Œ ë” ê¸¸ê²Œ(200~500ê°œ) ëŠ˜ë ¤ë„ ë©ë‹ˆë‹¤.
    const FORTUNES = [
      { text: "ì˜¤ëŠ˜ì€ â€˜í‹° ì•ˆ ë‚˜ê²Œ ì˜ ë˜ëŠ” ë‚ â€™ì´ì—ìš”.", desc: "í¬ê²Œ í‹° ë‚˜ì§„ ì•Šì•„ë„, í•˜ë‚˜ì”© ì°©ì°© ì •ë¦¬ë˜ëŠ” íë¦„ì´ ì™€ìš”. ì˜¤ëŠ˜ì€ â€˜ì‘ì€ ì™„ë£Œâ€™ê°€ í–‰ìš´ì´ì—ìš”.", tag:"ì˜¤ëŠ˜ì˜ ìš´ì„¸" },
      { text: "ì§€ê¸ˆ ë– ì˜¤ë¥¸ ê·¸ ì„ íƒ, ê½¤ ì •í™•í•´ìš”.", desc: "ë¨¸ë¦¬ê°€ ì•„ë‹ˆë¼ â€˜ê°â€™ìœ¼ë¡œ ëŠë‚€ ìª½ì´ ë” ë§ì„ í™•ë¥ ì´ ë†’ì•„ìš”. ë¶€ë‹´ ì—†ì´ í•œ ê±¸ìŒë§Œ.", tag:"ì˜¤ëŠ˜ì˜ í•œë§ˆë””" },
      { text: "ë§ í•œë§ˆë””ê°€ ë³µì´ ë˜ëŠ” ë‚ .", desc: "ì¹­ì°¬Â·ê°ì‚¬Â·ì‘ì›ì´ í–‰ìš´ì„ ë¶ˆëŸ¬ìš”. ì˜¤ëŠ˜ì€ ë¨¼ì € ê±´ë„¤ëŠ” ì‚¬ëŒì´ ì´ê²¨ìš”.", tag:"í–‰ìš´ ë©”ì‹œì§€" },
      { text: "ì˜¤ë˜ ê³ ë¯¼í•œ ì¼, ì˜¤ëŠ˜ì€ ê²°ë¡ ì´ ë‚˜ìš”.", desc: "ì™„ë²½í•œ ë‹µì€ ì—†ì–´ë„ â€˜ì§€ê¸ˆ ê°€ëŠ¥í•œ ìµœì„ â€™ì´ ë³´ì—¬ìš”. ì •í•˜ë©´ í¸í•´ì ¸ìš”.", tag:"ì˜¤ëŠ˜ì˜ ìš´ì„¸" },
      { text: "ì‘ê²Œ ì‹œì‘í•˜ë©´ í¬ê²Œ ì´ì–´ì ¸ìš”.", desc: "í° ê³„íšë³´ë‹¤ 10ë¶„ í–‰ë™ì´ ë” ê°•ë ¥í•´ìš”. ì˜¤ëŠ˜ì€ â€˜ì‹œì‘â€™ì´ ìš´ì´ì—ìš”.", tag:"í–‰ìš´ ë©”ì‹œì§€" },
      { text: "ë§ˆìŒì´ ê°€ë²¼ì›Œì§€ë©´ ì¼ì´ í’€ë ¤ìš”.", desc: "í•´ì•¼ í•  ê²ƒ 1ê°œë§Œ í™•ì‹¤íˆ ëë‚´ê³ , ë‚˜ë¨¸ì§„ ë‚´ì¼ì˜ ë‚˜ì—ê²Œ ë§¡ê²¨ë„ ë¼ìš”.", tag:"ì˜¤ëŠ˜ì˜ í•œë§ˆë””" },
      { text: "ëˆ„êµ°ê°€ê°€ ë‹¹ì‹ ì„ â€˜ì¢‹ê²Œâ€™ ë³´ê³  ìˆì–´ìš”.", desc: "ë‚´ê°€ ëª¨ë¥´ëŠ” ê³³ì—ì„œ í‰ê°€ê°€ ì˜¬ë¼ê°€ê³  ìˆì–´ìš”. í‰ì†Œì²˜ëŸ¼ë§Œ í•´ë„ ì¶©ë¶„í•´ìš”.", tag:"ì˜¤ëŠ˜ì˜ ìš´ì„¸" },
      { text: "ì˜¤ëŠ˜ì€ ë¯¸ë£¨ë˜ â€˜ì •ë¦¬â€™ê°€ ê¸ˆìš´.", desc: "ê°€ë°©/ì±…ìƒ/ì‚¬ì§„ì²©/ë©”ëª¨â€¦ í•˜ë‚˜ë§Œ ì •ë¦¬í•´ë„ íë¦„ì´ ë°”ë€Œì–´ìš”.", tag:"í–‰ìš´ ë©”ì‹œì§€" },
      { text: "â€˜ì˜ˆì˜ê²Œâ€™ ê²°ì •í•˜ë©´ â€˜ì¢‹ê²Œâ€™ í’€ë ¤ìš”.", desc: "ì˜¤ëŠ˜ì€ ì‹¬ë¯¸ê°ì´ ìš´ì´ì—ìš”. ê¹”ë”í•˜ê²Œ, ê°€ë³ê²Œ, ê·¸ë¦¬ê³  ìì‹  ìˆê²Œ.", tag:"ì˜¤ëŠ˜ì˜ í•œë§ˆë””" },
      { text: "ì¢‹ì€ ì‚¬ëŒê³¼ì˜ ì—°ê²°ì´ ìƒê²¨ìš”.", desc: "ìš°ì—°ì²˜ëŸ¼ ë³´ì´ì§€ë§Œ í•„ì—°ì¸ ë§Œë‚¨ì´ ìˆì–´ìš”. ê°€ë³ê²Œ ì¸ì‚¬ë¶€í„°.", tag:"ì˜¤ëŠ˜ì˜ ìš´ì„¸" },
      { text: "ì˜¤ëŠ˜ì€ ì†ë„ê°€ ì•„ë‹ˆë¼ ë°©í–¥ì˜ ë‚ .", desc: "ë¹¨ë¦¬ ê°€ëŠ” ê²ƒë³´ë‹¤ â€˜ë§ëŠ” ìª½â€™ì„ íƒí•˜ë©´ ê²°ê³¼ê°€ í›¨ì”¬ ì¢‹ì•„ì ¸ìš”.", tag:"ì˜¤ëŠ˜ì˜ í•œë§ˆë””" },
      { text: "ë‹¹ì‹ ì˜ â€˜ê¸°ì¤€â€™ì´ ë¹›ë‚˜ëŠ” ë‚ ì´ì—ìš”.", desc: "í”ë“¤ë¦¬ì§€ ì•ŠëŠ” íƒœë„ê°€ ì‚¬ëŒì„ ëŒì–´ë‹¹ê²¨ìš”. ì˜¤ëŠ˜ì€ ë‹¨ë‹¨í•¨ì´ ë§¤ë ¥.", tag:"í–‰ìš´ ë©”ì‹œì§€" },
      { text: "ì‘ì€ ëŸ­í‚¤ê°€ ì—°ì†ìœ¼ë¡œ ë“¤ì–´ì™€ìš”.", desc: "ìë¦¬, íƒ€ì´ë°, ì—°ë½â€¦ ì‚¬ì†Œí•œ ìš´ì´ ëª¨ì—¬ í° ë§Œì¡±ì´ ë¼ìš”.", tag:"ì˜¤ëŠ˜ì˜ ìš´ì„¸" },
      { text: "ì˜¤ëŠ˜ì€ â€˜ë‚´ í¸â€™ì´ ëŠ˜ì–´ë‚˜ëŠ” ë‚ .", desc: "ë„ì›€ë°›ì„ ìˆ˜ ìˆëŠ” ì‚¬ëŒ, ì´ì•¼ê¸°í•  ìˆ˜ ìˆëŠ” ì‚¬ëŒì´ ëŠ˜ì–´ë‚  ê±°ì˜ˆìš”.", tag:"í–‰ìš´ ë©”ì‹œì§€" },
      { text: "í•œ ë²ˆ ë” ì›ƒìœ¼ë©´, í–‰ìš´ì´ í•œ ë²ˆ ë” ì™€ìš”.", desc: "ê¸°ë¶„ ì¢‹ì€ í‘œì •ì´ ìƒê°ë³´ë‹¤ ë§ì€ ê±¸ ë°”ê¿”ì¤˜ìš”. ì˜¤ëŠ˜ì€ í‘œì •ì´ ìš´.", tag:"ì˜¤ëŠ˜ì˜ í•œë§ˆë””" }
    ];

    const KEYWORDS = ["ì •ë¦¬", "ìì‹ ê°", "ê°€ë²¼ì›€", "ì—°ê²°", "ì§‘ì¤‘", "ë¯¸ì†Œ", "ì‹œì‘", "ì„ íƒ", "ì™„ë£Œ", "ê°ì‚¬", "ìš©ê¸°", "ì—¬ìœ ", "í–‰ìš´", "ì„¼ìŠ¤", "ê· í˜•"];
    const COLORS = ["íˆì¹ ì˜¤ë Œì§€", "í¬ë¦¼ ë² ì´ì§€", "ì†Œí”„íŠ¸ ë¸”ë™", "ë¯¸ë“œë‚˜ì‡ ë„¤ì´ë¹„", "ë¡œì¦ˆ ë¸Œë¼ìš´", "ì˜¤í”„í™”ì´íŠ¸", "ìƒ´í˜ì¸ ê³¨ë“œ"];
    const TIPS = [
      "ê±°ìš¸ ë³¼ ë•Œ ì–´ê¹¨ í´ê¸°",
      "ë§ˆìŒì— ë“œëŠ” ì‚¬ì§„ í•œ ì¥ ì €ì¥",
      "í•˜ê³  ì‹¶ì€ ë§ â€˜ì§§ê²Œâ€™ ì „í•˜ê¸°",
      "ë¬¼ í•œ ì” ë¨¼ì € ë§ˆì‹œê¸°",
      "í•¸ë“œí° ì‚¬ì§„ 10ì¥ ì •ë¦¬",
      "ì˜¤ëŠ˜ í•  ì¼ 1ê°œë§Œ ì™„ë²½íˆ"
    ];
    const PROMISES = [
      "ì˜¤ëŠ˜ì€ ë‚˜ë¥¼ í•¨ë¶€ë¡œ ëŒ€í•˜ì§€ ì•Šê¸°",
      "ì¢‹ì€ ë§ í•œ ë²ˆ ë¨¼ì € í•˜ê¸°",
      "í”¼ê³¤í•˜ë©´ ì‰¬ì–´ë„ ê´œì°®ë‹¤ê³  í—ˆë½í•˜ê¸°",
      "ë‚˜ë¥¼ ì¹­ì°¬ 1ê°œ í•˜ê¸°",
      "ë¯¸ë£¨ë˜ ê²ƒ í•˜ë‚˜ë§Œ ëë‚´ê¸°",
      "ì‘ê²Œë¼ë„ ì‹œì‘í•˜ê¸°"
    ];

    // ------------------ ìœ í‹¸ ------------------
    const $ = (id) => document.getElementById(id);

    function pad2(n){ return String(n).padStart(2, "0"); }
    function todayKey(){
      const d = new Date();
      return `${d.getFullYear()}-${pad2(d.getMonth()+1)}-${pad2(d.getDate())}`;
    }

    function randIndex(max){
      // cryptoê°€ ìˆìœ¼ë©´ ë” ëœë¤í•˜ê²Œ
      if (window.crypto && crypto.getRandomValues) {
        const a = new Uint32Array(1);
        crypto.getRandomValues(a);
        return a[0] % max;
      }
      return Math.floor(Math.random() * max);
    }

    function pickOne(arr){
      return arr[randIndex(arr.length)];
    }

    function toast(msg){
      const t = $("toast");
      t.textContent = msg;
      t.classList.add("on");
      setTimeout(() => t.classList.remove("on"), 1400);
    }

    // ------------------ í•µì‹¬ ë¡œì§ ------------------
    // ê°™ì€ ë‚  ê°™ì€ í°ì—ì„œëŠ” ë™ì¼í•œ ê²°ê³¼ê°€ ë‚˜ì˜¤ë„ë¡ localStorageì— ì €ì¥í•©ë‹ˆë‹¤.
    const STORAGE_KEY = "hssup_fortune_v1";

    function loadOrMakeFortune(forceNew=false){
      const key = todayKey();

      if(!forceNew){
        try{
          const saved = JSON.parse(localStorage.getItem(STORAGE_KEY) || "null");
          if(saved && saved.dateKey === key && saved.payload){
            return saved.payload;
          }
        }catch(e){}
      }

      const fortune = pickOne(FORTUNES);
      const payload = {
        fortune,
        keyword: pickOne(KEYWORDS),
        color: pickOne(COLORS),
        tip: pickOne(TIPS),
        promise: pickOne(PROMISES),
        dateKey: key,
        madeAt: Date.now()
      };

      try{
        localStorage.setItem(STORAGE_KEY, JSON.stringify({ dateKey:key, payload }));
      }catch(e){ /* storage ë¶ˆê°€ í™˜ê²½ì´ë©´ ê·¸ëƒ¥ ì§„í–‰ */ }

      return payload;
    }

    function render(payload){
      const d = new Date();
      const dow = ["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "][d.getDay()];
      $("dateLine").textContent = `${d.getFullYear()}ë…„ ${pad2(d.getMonth()+1)}ì›” ${pad2(d.getDate())}ì¼ (${dow})`;
      $("todayPill").textContent = `HSSUP LUCKY Â· ${todayKey()}`;

      $("fortuneTag").textContent = payload.fortune.tag || "ì˜¤ëŠ˜ì˜ í•œë§ˆë””";
      $("fortuneText").textContent = payload.fortune.text;
      $("fortuneDesc").textContent = payload.fortune.desc || "";

      $("luckyKeyword").textContent = payload.keyword;
      $("luckyColor").textContent = payload.color;
      $("todayTip").textContent = payload.tip;
      $("onePromise").textContent = payload.promise;
    }

    function getShareText(){
      const saved = loadOrMakeFortune(false);
      const text =
`[íˆì¹ ì˜¤ëŠ˜ì˜ í–‰ìš´]
${saved.fortune.text}
- í–‰ìš´ í‚¤ì›Œë“œ: ${saved.keyword}
- ëŸ­í‚¤ ì»¬ëŸ¬: ${saved.color}

ì˜¤ëŠ˜ë„ ì˜ˆì˜ê²Œ, íˆì¹ âœ¨`;
      return text;
    }

    async function copyToClipboard(text){
      try{
        await navigator.clipboard.writeText(text);
        toast("ë³µì‚¬í–ˆì–´ìš”!");
      }catch(e){
        // fallback
        const ta = document.createElement("textarea");
        ta.value = text;
        ta.style.position = "fixed";
        ta.style.left = "-9999px";
        document.body.appendChild(ta);
        ta.select();
        document.execCommand("copy");
        document.body.removeChild(ta);
        toast("ë³µì‚¬í–ˆì–´ìš”!");
      }
    }

    async function shareText(text){
      try{
        if(navigator.share){
          await navigator.share({ title:"íˆì¹ ì˜¤ëŠ˜ì˜ í–‰ìš´", text, url: location.href });
          toast("ê³µìœ  ì™„ë£Œ!");
        }else{
          await copyToClipboard(text + "\n" + location.href);
          toast("ê³µìœ  ê¸°ëŠ¥ì´ ì—†ì–´ ë§í¬ë¥¼ ë³µì‚¬í–ˆì–´ìš”!");
        }
      }catch(e){
        // ì‚¬ìš©ìê°€ ê³µìœ  ì·¨ì†Œí•´ë„ ì—ëŸ¬ë¡œ ë–¨ì–´ì§ˆ ìˆ˜ ìˆì–´ ë¬´ì‹œ
      }
    }

    // ------------------ ì´ë²¤íŠ¸ ------------------
    (function init(){
      const payload = loadOrMakeFortune(false);
      render(payload);

      $("newBtn").addEventListener("click", () => {
        // "ìƒˆ ìš´ì„¸ ë½‘ê¸°"ëŠ” ì˜¤ëŠ˜ì´ë¼ë„ ê°•ì œë¡œ ìƒˆë¡œ ë½‘ê²Œ
        const payload2 = loadOrMakeFortune(true);
        render(payload2);
        toast("ìƒˆ ìš´ì„¸ë¥¼ ë½‘ì•˜ì–´ìš”!");
      });

      $("copyBtn").addEventListener("click", async () => {
        await copyToClipboard(getShareText());
      });

      $("shareBtn").addEventListener("click", async () => {
        await shareText(getShareText());
      });
    })();
  </script>
</body>
</html>
